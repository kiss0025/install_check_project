<!DOCTYPE html>
<html>
  <head>
    <title>사상통신분소</title>
    <script>
      function fetchData() {
        var temperatureUrl = "http://125.134.131.184:7676/temperature";
        var humidityUrl = "http://125.134.131.184:7676/humidity";
        var voltageUrl = "http://125.134.131.184:7676/voltage";

        setInterval(() => {
          fetch(temperatureUrl)
            .then((response) => response.json())
            .then((data) => {
              document.getElementById("temperature").textContent =
                data.temperature + " °C";
            })
            .catch((error) => {
              console.error("Error fetching temperature:", error);
            });

          fetch(humidityUrl)
            .then((response) => response.json())
            .then((data) => {
              document.getElementById("humidity").textContent =
                data.humidity + " %";
            })
            .catch((error) => {
              console.error("Error fetching humidity:", error);
            });

          fetch(voltageUrl)
            .then((response) => response.json())
            .then((data) => {
              document.getElementById("voltage").textContent =
                data.voltage + " V";
            })
            .catch((error) => {
              console.error("Error fetching voltage:", error);
            });
        }, 3000);
      }

      window.onload = fetchData;
    </script>
  </head>
  <body>
    <p>
      Temperature: <span id="temperature">Fetching...</span> || humidity:
      <span id="humidity">Fetching...</span> || Voltage:
      <span id="voltage">Fetching...</span>
    </p>
    <iframe
      id="iframe"
      src="visualizer.html"
      style="display: block; width: 100vw; height: 85vh"
    ></iframe>
  </body>
</html>
